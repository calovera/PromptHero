function c(e,t,n){function r(s,l){var p;Object.defineProperty(s,"_zod",{value:s._zod??{},enumerable:!1}),(p=s._zod).traits??(p.traits=new Set),s._zod.traits.add(e),t(s,l);for(const b in u.prototype)b in s||Object.defineProperty(s,b,{value:u.prototype[b].bind(s)});s._zod.constr=u,s._zod.def=l}const o=n?.Parent??Object;class i extends o{}Object.defineProperty(i,"name",{value:e});function u(s){var l;const p=n?.Parent?new i:this;r(p,s),(l=p._zod).deferred??(l.deferred=[]);for(const b of p._zod.deferred)b();return p}return Object.defineProperty(u,"init",{value:r}),Object.defineProperty(u,Symbol.hasInstance,{value:s=>n?.Parent&&s instanceof n.Parent?!0:s?._zod?.traits?.has(e)}),Object.defineProperty(u,"name",{value:e}),u}class N extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const xe={};function E(e){return xe}function rt(e){const t=Object.values(e).filter(r=>typeof r=="number");return Object.entries(e).filter(([r,o])=>t.indexOf(+r)===-1).map(([r,o])=>o)}function H(e,t){return typeof t=="bigint"?t.toString():t}function Ne(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function ne(e){return e==null}function re(e){const t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}function ot(e,t){const n=(e.toString().split(".")[1]||"").length,r=t.toString();let o=(r.split(".")[1]||"").length;if(o===0&&/\d?e-\d?/.test(r)){const l=r.match(/\d?e-(\d?)/);l?.[1]&&(o=Number.parseInt(l[1]))}const i=n>o?n:o,u=Number.parseInt(e.toFixed(i).replace(".","")),s=Number.parseInt(t.toFixed(i).replace(".",""));return u%s/10**i}const ae=Symbol("evaluating");function f(e,t,n){let r;Object.defineProperty(e,t,{get(){if(r!==ae)return r===void 0&&(r=ae,r=n()),r},set(o){Object.defineProperty(e,t,{value:o})},configurable:!0})}function it(e){return Object.create(Object.getPrototypeOf(e),Object.getOwnPropertyDescriptors(e))}function P(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function T(...e){const t={};for(const n of e){const r=Object.getOwnPropertyDescriptors(n);Object.assign(t,r)}return Object.defineProperties({},t)}function le(e){return JSON.stringify(e)}const Ae="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function Q(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const ut=Ne(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function M(e){if(Q(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(Q(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function Re(e){return M(e)?{...e}:e}const ct=new Set(["string","number","symbol"]);function J(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function S(e,t,n){const r=new e._zod.constr(t??e._zod.def);return(!t||n?.parent)&&(r._zod.parent=e),r}function a(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if(t?.message!==void 0){if(t?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function st(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const at={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function lt(e,t){const n=e._zod.def,r=T(e._zod.def,{get shape(){const o={};for(const i in t){if(!(i in n.shape))throw new Error(`Unrecognized key: "${i}"`);t[i]&&(o[i]=n.shape[i])}return P(this,"shape",o),o},checks:[]});return S(e,r)}function pt(e,t){const n=e._zod.def,r=T(e._zod.def,{get shape(){const o={...e._zod.def.shape};for(const i in t){if(!(i in n.shape))throw new Error(`Unrecognized key: "${i}"`);t[i]&&delete o[i]}return P(this,"shape",o),o},checks:[]});return S(e,r)}function ht(e,t){if(!M(t))throw new Error("Invalid input to extend: expected a plain object");const n=T(e._zod.def,{get shape(){const r={...e._zod.def.shape,...t};return P(this,"shape",r),r},checks:[]});return S(e,n)}function ft(e,t){const n=T(e._zod.def,{get shape(){const r={...e._zod.def.shape,...t._zod.def.shape};return P(this,"shape",r),r},get catchall(){return t._zod.def.catchall},checks:[]});return S(e,n)}function dt(e,t,n){const r=T(t._zod.def,{get shape(){const o=t._zod.def.shape,i={...o};if(n)for(const u in n){if(!(u in o))throw new Error(`Unrecognized key: "${u}"`);n[u]&&(i[u]=e?new e({type:"optional",innerType:o[u]}):o[u])}else for(const u in o)i[u]=e?new e({type:"optional",innerType:o[u]}):o[u];return P(this,"shape",i),i},checks:[]});return S(t,r)}function mt(e,t,n){const r=T(t._zod.def,{get shape(){const o=t._zod.def.shape,i={...o};if(n)for(const u in n){if(!(u in i))throw new Error(`Unrecognized key: "${u}"`);n[u]&&(i[u]=new e({type:"nonoptional",innerType:o[u]}))}else for(const u in o)i[u]=new e({type:"nonoptional",innerType:o[u]});return P(this,"shape",i),i},checks:[]});return S(t,r)}function x(e,t=0){for(let n=t;n<e.issues.length;n++)if(e.issues[n]?.continue!==!0)return!0;return!1}function Ce(e,t){return t.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(e),n})}function j(e){return typeof e=="string"?e:e?.message}function O(e,t,n){const r={...e,path:e.path??[]};if(!e.message){const o=j(e.inst?._zod.def?.error?.(e))??j(t?.error?.(e))??j(n.customError?.(e))??j(n.localeError?.(e))??"Invalid input";r.message=o}return delete r.inst,delete r.continue,t?.reportInput||delete r.input,r}function oe(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function A(...e){const[t,n,r]=e;return typeof t=="string"?{message:t,code:"custom",input:n,inst:r}:{...t}}const je=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,H,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},De=c("$ZodError",je),Ue=c("$ZodError",je,{Parent:Error});function _t(e,t=n=>n.message){const n={},r=[];for(const o of e.issues)o.path.length>0?(n[o.path[0]]=n[o.path[0]]||[],n[o.path[0]].push(t(o))):r.push(t(o));return{formErrors:r,fieldErrors:n}}function gt(e,t){const n=t||function(i){return i.message},r={_errors:[]},o=i=>{for(const u of i.issues)if(u.code==="invalid_union"&&u.errors.length)u.errors.map(s=>o({issues:s}));else if(u.code==="invalid_key")o({issues:u.issues});else if(u.code==="invalid_element")o({issues:u.issues});else if(u.path.length===0)r._errors.push(n(u));else{let s=r,l=0;for(;l<u.path.length;){const p=u.path[l];l===u.path.length-1?(s[p]=s[p]||{_errors:[]},s[p]._errors.push(n(u))):s[p]=s[p]||{_errors:[]},s=s[p],l++}}};return o(e),r}const vt=e=>(t,n,r,o)=>{const i=r?Object.assign(r,{async:!1}):{async:!1},u=t._zod.run({value:n,issues:[]},i);if(u instanceof Promise)throw new N;if(u.issues.length){const s=new(o?.Err??e)(u.issues.map(l=>O(l,i,E())));throw Ae(s,o?.callee),s}return u.value},zt=e=>async(t,n,r,o)=>{const i=r?Object.assign(r,{async:!0}):{async:!0};let u=t._zod.run({value:n,issues:[]},i);if(u instanceof Promise&&(u=await u),u.issues.length){const s=new(o?.Err??e)(u.issues.map(l=>O(l,i,E())));throw Ae(s,o?.callee),s}return u.value},Fe=e=>(t,n,r)=>{const o=r?{...r,async:!1}:{async:!1},i=t._zod.run({value:n,issues:[]},o);if(i instanceof Promise)throw new N;return i.issues.length?{success:!1,error:new(e??De)(i.issues.map(u=>O(u,o,E())))}:{success:!0,data:i.value}},kt=Fe(Ue),Me=e=>async(t,n,r)=>{const o=r?Object.assign(r,{async:!0}):{async:!0};let i=t._zod.run({value:n,issues:[]},o);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new e(i.issues.map(u=>O(u,o,E())))}:{success:!0,data:i.value}},bt=Me(Ue),wt=/^[cC][^\s-]{8,}$/,Zt=/^[0-9a-z]+$/,$t=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,yt=/^[0-9a-vA-V]{20}$/,It=/^[A-Za-z0-9]{27}$/,Et=/^[a-zA-Z0-9_-]{21}$/,Ot=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,Pt=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,pe=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,St=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,Tt="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function xt(){return new RegExp(Tt,"u")}const Nt=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,At=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,Rt=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Ct=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,jt=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Le=/^[A-Za-z0-9_-]*$/,Dt=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,Ut=/^\+(?:[0-9]){6,14}[0-9]$/,Ve="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",Ft=new RegExp(`^${Ve}$`);function Be(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function Mt(e){return new RegExp(`^${Be(e)}$`)}function Lt(e){const t=Be({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${t}(?:${n.join("|")})`;return new RegExp(`^${Ve}T(?:${r})$`)}const Vt=e=>{const t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},Bt=/^\d+$/,Jt=/^-?\d+(?:\.\d+)?/i,Kt=/true|false/i,Wt=/^[^A-Z]*$/,Gt=/^[^a-z]*$/,Z=c("$ZodCheck",(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),Je={number:"number",bigint:"bigint",object:"date"},Ke=c("$ZodCheckLessThan",(e,t)=>{Z.init(e,t);const n=Je[typeof t.value];e._zod.onattach.push(r=>{const o=r._zod.bag,i=(t.inclusive?o.maximum:o.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<i&&(t.inclusive?o.maximum=t.value:o.exclusiveMaximum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value<=t.value:r.value<t.value)||r.issues.push({origin:n,code:"too_big",maximum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),We=c("$ZodCheckGreaterThan",(e,t)=>{Z.init(e,t);const n=Je[typeof t.value];e._zod.onattach.push(r=>{const o=r._zod.bag,i=(t.inclusive?o.minimum:o.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>i&&(t.inclusive?o.minimum=t.value:o.exclusiveMinimum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value>=t.value:r.value>t.value)||r.issues.push({origin:n,code:"too_small",minimum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Yt=c("$ZodCheckMultipleOf",(e,t)=>{Z.init(e,t),e._zod.onattach.push(n=>{var r;(r=n._zod.bag).multipleOf??(r.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%t.value===BigInt(0):ot(n.value,t.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),Xt=c("$ZodCheckNumberFormat",(e,t)=>{Z.init(e,t),t.format=t.format||"float64";const n=t.format?.includes("int"),r=n?"int":"number",[o,i]=at[t.format];e._zod.onattach.push(u=>{const s=u._zod.bag;s.format=t.format,s.minimum=o,s.maximum=i,n&&(s.pattern=Bt)}),e._zod.check=u=>{const s=u.value;if(n){if(!Number.isInteger(s)){u.issues.push({expected:r,format:t.format,code:"invalid_type",continue:!1,input:s,inst:e});return}if(!Number.isSafeInteger(s)){s>0?u.issues.push({input:s,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort}):u.issues.push({input:s,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort});return}}s<o&&u.issues.push({origin:"number",input:s,code:"too_small",minimum:o,inclusive:!0,inst:e,continue:!t.abort}),s>i&&u.issues.push({origin:"number",input:s,code:"too_big",maximum:i,inst:e})}}),qt=c("$ZodCheckMaxLength",(e,t)=>{var n;Z.init(e,t),(n=e._zod.def).when??(n.when=r=>{const o=r.value;return!ne(o)&&o.length!==void 0}),e._zod.onattach.push(r=>{const o=r._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<o&&(r._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{const o=r.value;if(o.length<=t.maximum)return;const u=oe(o);r.issues.push({origin:u,code:"too_big",maximum:t.maximum,inclusive:!0,input:o,inst:e,continue:!t.abort})}}),Ht=c("$ZodCheckMinLength",(e,t)=>{var n;Z.init(e,t),(n=e._zod.def).when??(n.when=r=>{const o=r.value;return!ne(o)&&o.length!==void 0}),e._zod.onattach.push(r=>{const o=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>o&&(r._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{const o=r.value;if(o.length>=t.minimum)return;const u=oe(o);r.issues.push({origin:u,code:"too_small",minimum:t.minimum,inclusive:!0,input:o,inst:e,continue:!t.abort})}}),Qt=c("$ZodCheckLengthEquals",(e,t)=>{var n;Z.init(e,t),(n=e._zod.def).when??(n.when=r=>{const o=r.value;return!ne(o)&&o.length!==void 0}),e._zod.onattach.push(r=>{const o=r._zod.bag;o.minimum=t.length,o.maximum=t.length,o.length=t.length}),e._zod.check=r=>{const o=r.value,i=o.length;if(i===t.length)return;const u=oe(o),s=i>t.length;r.issues.push({origin:u,...s?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort})}}),K=c("$ZodCheckStringFormat",(e,t)=>{var n,r;Z.init(e,t),e._zod.onattach.push(o=>{const i=o._zod.bag;i.format=t.format,t.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=o=>{t.pattern.lastIndex=0,!t.pattern.test(o.value)&&o.issues.push({origin:"string",code:"invalid_format",format:t.format,input:o.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(r=e._zod).check??(r.check=()=>{})}),en=c("$ZodCheckRegex",(e,t)=>{K.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,!t.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),tn=c("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=Wt),K.init(e,t)}),nn=c("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=Gt),K.init(e,t)}),rn=c("$ZodCheckIncludes",(e,t)=>{Z.init(e,t);const n=J(t.includes),r=new RegExp(typeof t.position=="number"?`^.{${t.position}}${n}`:n);t.pattern=r,e._zod.onattach.push(o=>{const i=o._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(r)}),e._zod.check=o=>{o.value.includes(t.includes,t.position)||o.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:o.value,inst:e,continue:!t.abort})}}),on=c("$ZodCheckStartsWith",(e,t)=>{Z.init(e,t);const n=new RegExp(`^${J(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push(r=>{const o=r._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(n)}),e._zod.check=r=>{r.value.startsWith(t.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:r.value,inst:e,continue:!t.abort})}}),un=c("$ZodCheckEndsWith",(e,t)=>{Z.init(e,t);const n=new RegExp(`.*${J(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push(r=>{const o=r._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(n)}),e._zod.check=r=>{r.value.endsWith(t.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:r.value,inst:e,continue:!t.abort})}}),cn=c("$ZodCheckOverwrite",(e,t)=>{Z.init(e,t),e._zod.check=n=>{n.value=t.tx(n.value)}});class sn{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const r=t.split(`
`).filter(u=>u),o=Math.min(...r.map(u=>u.length-u.trimStart().length)),i=r.map(u=>u.slice(o)).map(u=>" ".repeat(this.indent*2)+u);for(const u of i)this.content.push(u)}compile(){const t=Function,n=this?.args,o=[...(this?.content??[""]).map(i=>`  ${i}`)];return new t(...n,o.join(`
`))}}const an={major:4,minor:0,patch:16},v=c("$ZodType",(e,t)=>{var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=an;const r=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&r.unshift(e);for(const o of r)for(const i of o._zod.onattach)i(e);if(r.length===0)(n=e._zod).deferred??(n.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const o=(i,u,s)=>{let l=x(i),p;for(const b of u){if(b._zod.def.when){if(!b._zod.def.when(i))continue}else if(l)continue;const h=i.issues.length,d=b._zod.check(i);if(d instanceof Promise&&s?.async===!1)throw new N;if(p||d instanceof Promise)p=(p??Promise.resolve()).then(async()=>{await d,i.issues.length!==h&&(l||(l=x(i,h)))});else{if(i.issues.length===h)continue;l||(l=x(i,h))}}return p?p.then(()=>i):i};e._zod.run=(i,u)=>{const s=e._zod.parse(i,u);if(s instanceof Promise){if(u.async===!1)throw new N;return s.then(l=>o(l,r,u))}return o(s,r,u)}}e["~standard"]={validate:o=>{try{const i=kt(e,o);return i.success?{value:i.data}:{issues:i.error?.issues}}catch{return bt(e,o).then(u=>u.success?{value:u.data}:{issues:u.error?.issues})}},vendor:"zod",version:1}}),ie=c("$ZodString",(e,t)=>{v.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??Vt(e._zod.bag),e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:e}),n}}),_=c("$ZodStringFormat",(e,t)=>{K.init(e,t),ie.init(e,t)}),ln=c("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=Pt),_.init(e,t)}),pn=c("$ZodUUID",(e,t)=>{if(t.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(r===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=pe(r))}else t.pattern??(t.pattern=pe());_.init(e,t)}),hn=c("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=St),_.init(e,t)}),fn=c("$ZodURL",(e,t)=>{_.init(e,t),e._zod.check=n=>{try{const r=n.value.trim(),o=new URL(r);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(o.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:Dt.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(o.protocol.endsWith(":")?o.protocol.slice(0,-1):o.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),t.normalize?n.value=o.href:n.value=r;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!t.abort})}}}),dn=c("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=xt()),_.init(e,t)}),mn=c("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=Et),_.init(e,t)}),_n=c("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=wt),_.init(e,t)}),gn=c("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=Zt),_.init(e,t)}),vn=c("$ZodULID",(e,t)=>{t.pattern??(t.pattern=$t),_.init(e,t)}),zn=c("$ZodXID",(e,t)=>{t.pattern??(t.pattern=yt),_.init(e,t)}),kn=c("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=It),_.init(e,t)}),bn=c("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=Lt(t)),_.init(e,t)}),wn=c("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=Ft),_.init(e,t)}),Zn=c("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=Mt(t)),_.init(e,t)}),$n=c("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=Ot),_.init(e,t)}),yn=c("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=Nt),_.init(e,t),e._zod.onattach.push(n=>{const r=n._zod.bag;r.format="ipv4"})}),In=c("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=At),_.init(e,t),e._zod.onattach.push(n=>{const r=n._zod.bag;r.format="ipv6"}),e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!t.abort})}}}),En=c("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=Rt),_.init(e,t)}),On=c("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=Ct),_.init(e,t),e._zod.check=n=>{const[r,o]=n.value.split("/");try{if(!o)throw new Error;const i=Number(o);if(`${i}`!==o)throw new Error;if(i<0||i>128)throw new Error;new URL(`http://[${r}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!t.abort})}}});function Ge(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const Pn=c("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=jt),_.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64"}),e._zod.check=n=>{Ge(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!t.abort})}});function Sn(e){if(!Le.test(e))return!1;const t=e.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=t.padEnd(Math.ceil(t.length/4)*4,"=");return Ge(n)}const Tn=c("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=Le),_.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64url"}),e._zod.check=n=>{Sn(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!t.abort})}}),xn=c("$ZodE164",(e,t)=>{t.pattern??(t.pattern=Ut),_.init(e,t)});function Nn(e,t=null){try{const n=e.split(".");if(n.length!==3)return!1;const[r]=n;if(!r)return!1;const o=JSON.parse(atob(r));return!("typ"in o&&o?.typ!=="JWT"||!o.alg||t&&(!("alg"in o)||o.alg!==t))}catch{return!1}}const An=c("$ZodJWT",(e,t)=>{_.init(e,t),e._zod.check=n=>{Nn(n.value,t.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!t.abort})}}),Ye=c("$ZodNumber",(e,t)=>{v.init(e,t),e._zod.pattern=e._zod.bag.pattern??Jt,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=Number(n.value)}catch{}const o=n.value;if(typeof o=="number"&&!Number.isNaN(o)&&Number.isFinite(o))return n;const i=typeof o=="number"?Number.isNaN(o)?"NaN":Number.isFinite(o)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:o,inst:e,...i?{received:i}:{}}),n}}),Rn=c("$ZodNumber",(e,t)=>{Xt.init(e,t),Ye.init(e,t)}),Cn=c("$ZodBoolean",(e,t)=>{v.init(e,t),e._zod.pattern=Kt,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=!!n.value}catch{}const o=n.value;return typeof o=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:o,inst:e}),n}}),jn=c("$ZodUnknown",(e,t)=>{v.init(e,t),e._zod.parse=n=>n}),Dn=c("$ZodNever",(e,t)=>{v.init(e,t),e._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:e}),n)});function he(e,t,n){e.issues.length&&t.issues.push(...Ce(n,e.issues)),t.value[n]=e.value}const Un=c("$ZodArray",(e,t)=>{v.init(e,t),e._zod.parse=(n,r)=>{const o=n.value;if(!Array.isArray(o))return n.issues.push({expected:"array",code:"invalid_type",input:o,inst:e}),n;n.value=Array(o.length);const i=[];for(let u=0;u<o.length;u++){const s=o[u],l=t.element._zod.run({value:s,issues:[]},r);l instanceof Promise?i.push(l.then(p=>he(p,n,u))):he(l,n,u)}return i.length?Promise.all(i).then(()=>n):n}});function D(e,t,n,r){e.issues.length&&t.issues.push(...Ce(n,e.issues)),e.value===void 0?n in r&&(t.value[n]=void 0):t.value[n]=e.value}const Fn=c("$ZodObject",(e,t)=>{v.init(e,t);const n=Ne(()=>{const h=Object.keys(t.shape);for(const m of h)if(!(t.shape[m]instanceof v))throw new Error(`Invalid element at key "${m}": expected a Zod schema`);const d=st(t.shape);return{shape:t.shape,keys:h,keySet:new Set(h),numKeys:h.length,optionalKeys:new Set(d)}});f(e._zod,"propValues",()=>{const h=t.shape,d={};for(const m in h){const $=h[m]._zod;if($.values){d[m]??(d[m]=new Set);for(const I of $.values)d[m].add(I)}}return d});const r=h=>{const d=new sn(["shape","payload","ctx"]),m=n.value,$=y=>{const k=le(y);return`shape[${k}]._zod.run({ value: input[${k}], issues: [] }, ctx)`};d.write("const input = payload.value;");const I=Object.create(null);let G=0;for(const y of m.keys)I[y]=`key_${G++}`;d.write("const newResult = {}");for(const y of m.keys){const k=I[y],w=le(y);d.write(`const ${k} = ${$(y)};`),d.write(`
        if (${k}.issues.length) {
          payload.issues = payload.issues.concat(${k}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${w}, ...iss.path] : [${w}]
          })));
        }
        
        if (${k}.value === undefined) {
          if (${w} in input) {
            newResult[${w}] = undefined;
          }
        } else {
          newResult[${w}] = ${k}.value;
        }
      `)}d.write("payload.value = newResult;"),d.write("return payload;");const C=d.compile();return(y,k)=>C(h,y,k)};let o;const i=Q,u=!xe.jitless,l=u&&ut.value,p=t.catchall;let b;e._zod.parse=(h,d)=>{b??(b=n.value);const m=h.value;if(!i(m))return h.issues.push({expected:"object",code:"invalid_type",input:m,inst:e}),h;const $=[];if(u&&l&&d?.async===!1&&d.jitless!==!0)o||(o=r(t.shape)),h=o(h,d);else{h.value={};const k=b.shape;for(const w of b.keys){const Y=k[w]._zod.run({value:m[w],issues:[]},d);Y instanceof Promise?$.push(Y.then(nt=>D(nt,h,w,m))):D(Y,h,w,m)}}if(!p)return $.length?Promise.all($).then(()=>h):h;const I=[],G=b.keySet,C=p._zod,y=C.def.type;for(const k of Object.keys(m)){if(G.has(k))continue;if(y==="never"){I.push(k);continue}const w=C.run({value:m[k],issues:[]},d);w instanceof Promise?$.push(w.then(se=>D(se,h,k,m))):D(w,h,k,m)}return I.length&&h.issues.push({code:"unrecognized_keys",keys:I,input:m,inst:e}),$.length?Promise.all($).then(()=>h):h}});function fe(e,t,n,r){for(const i of e)if(i.issues.length===0)return t.value=i.value,t;const o=e.filter(i=>!x(i));return o.length===1?(t.value=o[0].value,o[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(i=>i.issues.map(u=>O(u,r,E())))}),t)}const Mn=c("$ZodUnion",(e,t)=>{v.init(e,t),f(e._zod,"optin",()=>t.options.some(o=>o._zod.optin==="optional")?"optional":void 0),f(e._zod,"optout",()=>t.options.some(o=>o._zod.optout==="optional")?"optional":void 0),f(e._zod,"values",()=>{if(t.options.every(o=>o._zod.values))return new Set(t.options.flatMap(o=>Array.from(o._zod.values)))}),f(e._zod,"pattern",()=>{if(t.options.every(o=>o._zod.pattern)){const o=t.options.map(i=>i._zod.pattern);return new RegExp(`^(${o.map(i=>re(i.source)).join("|")})$`)}});const n=t.options.length===1,r=t.options[0]._zod.run;e._zod.parse=(o,i)=>{if(n)return r(o,i);let u=!1;const s=[];for(const l of t.options){const p=l._zod.run({value:o.value,issues:[]},i);if(p instanceof Promise)s.push(p),u=!0;else{if(p.issues.length===0)return p;s.push(p)}}return u?Promise.all(s).then(l=>fe(l,o,e,i)):fe(s,o,e,i)}}),Ln=c("$ZodIntersection",(e,t)=>{v.init(e,t),e._zod.parse=(n,r)=>{const o=n.value,i=t.left._zod.run({value:o,issues:[]},r),u=t.right._zod.run({value:o,issues:[]},r);return i instanceof Promise||u instanceof Promise?Promise.all([i,u]).then(([l,p])=>de(n,l,p)):de(n,i,u)}});function ee(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(M(e)&&M(t)){const n=Object.keys(t),r=Object.keys(e).filter(i=>n.indexOf(i)!==-1),o={...e,...t};for(const i of r){const u=ee(e[i],t[i]);if(!u.valid)return{valid:!1,mergeErrorPath:[i,...u.mergeErrorPath]};o[i]=u.data}return{valid:!0,data:o}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<e.length;r++){const o=e[r],i=t[r],u=ee(o,i);if(!u.valid)return{valid:!1,mergeErrorPath:[r,...u.mergeErrorPath]};n.push(u.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function de(e,t,n){if(t.issues.length&&e.issues.push(...t.issues),n.issues.length&&e.issues.push(...n.issues),x(e))return e;const r=ee(t.value,n.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return e.value=r.data,e}const Vn=c("$ZodEnum",(e,t)=>{v.init(e,t);const n=rt(t.entries),r=new Set(n);e._zod.values=r,e._zod.pattern=new RegExp(`^(${n.filter(o=>ct.has(typeof o)).map(o=>typeof o=="string"?J(o):o.toString()).join("|")})$`),e._zod.parse=(o,i)=>{const u=o.value;return r.has(u)||o.issues.push({code:"invalid_value",values:n,input:u,inst:e}),o}}),Bn=c("$ZodTransform",(e,t)=>{v.init(e,t),e._zod.parse=(n,r)=>{const o=t.transform(n.value,n);if(r.async)return(o instanceof Promise?o:Promise.resolve(o)).then(u=>(n.value=u,n));if(o instanceof Promise)throw new N;return n.value=o,n}});function me(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}const Jn=c("$ZodOptional",(e,t)=>{v.init(e,t),e._zod.optin="optional",e._zod.optout="optional",f(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),f(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${re(n.source)})?$`):void 0}),e._zod.parse=(n,r)=>{if(t.innerType._zod.optin==="optional"){const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(i=>me(i,n.value)):me(o,n.value)}return n.value===void 0?n:t.innerType._zod.run(n,r)}}),Kn=c("$ZodNullable",(e,t)=>{v.init(e,t),f(e._zod,"optin",()=>t.innerType._zod.optin),f(e._zod,"optout",()=>t.innerType._zod.optout),f(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${re(n.source)}|null)$`):void 0}),f(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(n,r)=>n.value===null?n:t.innerType._zod.run(n,r)}),Wn=c("$ZodDefault",(e,t)=>{v.init(e,t),e._zod.optin="optional",f(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>{if(n.value===void 0)return n.value=t.defaultValue,n;const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(i=>_e(i,t)):_e(o,t)}});function _e(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const Gn=c("$ZodPrefault",(e,t)=>{v.init(e,t),e._zod.optin="optional",f(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>(n.value===void 0&&(n.value=t.defaultValue),t.innerType._zod.run(n,r))}),Yn=c("$ZodNonOptional",(e,t)=>{v.init(e,t),f(e._zod,"values",()=>{const n=t.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),e._zod.parse=(n,r)=>{const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(i=>ge(i,e)):ge(o,e)}});function ge(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const Xn=c("$ZodCatch",(e,t)=>{v.init(e,t),f(e._zod,"optin",()=>t.innerType._zod.optin),f(e._zod,"optout",()=>t.innerType._zod.optout),f(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>{const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(i=>(n.value=i.value,i.issues.length&&(n.value=t.catchValue({...n,error:{issues:i.issues.map(u=>O(u,r,E()))},input:n.value}),n.issues=[]),n)):(n.value=o.value,o.issues.length&&(n.value=t.catchValue({...n,error:{issues:o.issues.map(i=>O(i,r,E()))},input:n.value}),n.issues=[]),n)}}),qn=c("$ZodPipe",(e,t)=>{v.init(e,t),f(e._zod,"values",()=>t.in._zod.values),f(e._zod,"optin",()=>t.in._zod.optin),f(e._zod,"optout",()=>t.out._zod.optout),f(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(n,r)=>{const o=t.in._zod.run(n,r);return o instanceof Promise?o.then(i=>ve(i,t,r)):ve(o,t,r)}});function ve(e,t,n){return e.issues.length?e:t.out._zod.run({value:e.value,issues:e.issues},n)}const Hn=c("$ZodReadonly",(e,t)=>{v.init(e,t),f(e._zod,"propValues",()=>t.innerType._zod.propValues),f(e._zod,"values",()=>t.innerType._zod.values),f(e._zod,"optin",()=>t.innerType._zod.optin),f(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(n,r)=>{const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(ze):ze(o)}});function ze(e){return e.value=Object.freeze(e.value),e}const Qn=c("$ZodCustom",(e,t)=>{Z.init(e,t),v.init(e,t),e._zod.parse=(n,r)=>n,e._zod.check=n=>{const r=n.value,o=t.fn(r);if(o instanceof Promise)return o.then(i=>ke(i,n,r,e));ke(o,n,r,e)}});function ke(e,t,n,r){if(!e){const o={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(o.params=r._zod.def.params),t.issues.push(A(o))}}class er{constructor(){this._map=new Map,this._idmap=new Map}add(t,...n){const r=n[0];if(this._map.set(t,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,t)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(t){const n=this._map.get(t);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(t),this}get(t){const n=t._zod.parent;if(n){const r={...this.get(n)??{}};delete r.id;const o={...r,...this._map.get(t)};return Object.keys(o).length?o:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function tr(){return new er}const U=tr();function nr(e,t){return new e({type:"string",...a(t)})}function rr(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...a(t)})}function be(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...a(t)})}function or(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...a(t)})}function ir(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...a(t)})}function ur(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...a(t)})}function cr(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...a(t)})}function sr(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...a(t)})}function ar(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...a(t)})}function lr(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...a(t)})}function pr(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...a(t)})}function hr(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...a(t)})}function fr(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...a(t)})}function dr(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...a(t)})}function mr(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...a(t)})}function _r(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...a(t)})}function gr(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...a(t)})}function vr(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...a(t)})}function zr(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...a(t)})}function kr(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...a(t)})}function br(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...a(t)})}function wr(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...a(t)})}function Zr(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...a(t)})}function $r(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...a(t)})}function yr(e,t){return new e({type:"string",format:"date",check:"string_format",...a(t)})}function Ir(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...a(t)})}function Er(e,t){return new e({type:"string",format:"duration",check:"string_format",...a(t)})}function Or(e,t){return new e({type:"number",checks:[],...a(t)})}function Pr(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...a(t)})}function Sr(e,t){return new e({type:"boolean",...a(t)})}function Tr(e){return new e({type:"unknown"})}function xr(e,t){return new e({type:"never",...a(t)})}function we(e,t){return new Ke({check:"less_than",...a(t),value:e,inclusive:!1})}function X(e,t){return new Ke({check:"less_than",...a(t),value:e,inclusive:!0})}function Ze(e,t){return new We({check:"greater_than",...a(t),value:e,inclusive:!1})}function q(e,t){return new We({check:"greater_than",...a(t),value:e,inclusive:!0})}function $e(e,t){return new Yt({check:"multiple_of",...a(t),value:e})}function Xe(e,t){return new qt({check:"max_length",...a(t),maximum:e})}function L(e,t){return new Ht({check:"min_length",...a(t),minimum:e})}function qe(e,t){return new Qt({check:"length_equals",...a(t),length:e})}function Nr(e,t){return new en({check:"string_format",format:"regex",...a(t),pattern:e})}function Ar(e){return new tn({check:"string_format",format:"lowercase",...a(e)})}function Rr(e){return new nn({check:"string_format",format:"uppercase",...a(e)})}function Cr(e,t){return new rn({check:"string_format",format:"includes",...a(t),includes:e})}function jr(e,t){return new on({check:"string_format",format:"starts_with",...a(t),prefix:e})}function Dr(e,t){return new un({check:"string_format",format:"ends_with",...a(t),suffix:e})}function R(e){return new cn({check:"overwrite",tx:e})}function Ur(e){return R(t=>t.normalize(e))}function Fr(){return R(e=>e.trim())}function Mr(){return R(e=>e.toLowerCase())}function Lr(){return R(e=>e.toUpperCase())}function Vr(e,t,n){return new e({type:"array",element:t,...a(n)})}function Br(e,t,n){return new e({type:"custom",check:"custom",fn:t,...a(n)})}function Jr(e){const t=Kr(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(A(r,n.value,t._zod.def));else{const o=r;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=n.value),o.inst??(o.inst=t),o.continue??(o.continue=!t._zod.def.abort),n.issues.push(A(o))}},e(n.value,n)));return t}function Kr(e,t){const n=new Z({check:"custom",...a(t)});return n._zod.check=e,n}const Wr=c("ZodISODateTime",(e,t)=>{bn.init(e,t),g.init(e,t)});function Gr(e){return $r(Wr,e)}const Yr=c("ZodISODate",(e,t)=>{wn.init(e,t),g.init(e,t)});function Xr(e){return yr(Yr,e)}const qr=c("ZodISOTime",(e,t)=>{Zn.init(e,t),g.init(e,t)});function Hr(e){return Ir(qr,e)}const Qr=c("ZodISODuration",(e,t)=>{$n.init(e,t),g.init(e,t)});function eo(e){return Er(Qr,e)}const to=(e,t)=>{De.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:n=>gt(e,n)},flatten:{value:n=>_t(e,n)},addIssue:{value:n=>{e.issues.push(n),e.message=JSON.stringify(e.issues,H,2)}},addIssues:{value:n=>{e.issues.push(...n),e.message=JSON.stringify(e.issues,H,2)}},isEmpty:{get(){return e.issues.length===0}}})},W=c("ZodError",to,{Parent:Error}),no=vt(W),ro=zt(W),oo=Fe(W),io=Me(W),z=c("ZodType",(e,t)=>(v.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone({...t,checks:[...t.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]}),e.clone=(n,r)=>S(e,n,r),e.brand=()=>e,e.register=(n,r)=>(n.add(e,r),e),e.parse=(n,r)=>no(e,n,r,{callee:e.parse}),e.safeParse=(n,r)=>oo(e,n,r),e.parseAsync=async(n,r)=>ro(e,n,r,{callee:e.parseAsync}),e.safeParseAsync=async(n,r)=>io(e,n,r),e.spa=e.safeParseAsync,e.refine=(n,r)=>e.check(Qo(n,r)),e.superRefine=n=>e.check(ei(n)),e.overwrite=n=>e.check(R(n)),e.optional=()=>Oe(e),e.nullable=()=>Pe(e),e.nullish=()=>Oe(Pe(e)),e.nonoptional=n=>Ko(e,n),e.array=()=>B(e),e.or=n=>Ro([e,n]),e.and=n=>jo(e,n),e.transform=n=>Se(e,Fo(n)),e.default=n=>Vo(e,n),e.prefault=n=>Jo(e,n),e.catch=n=>Go(e,n),e.pipe=n=>Se(e,n),e.readonly=()=>qo(e),e.describe=n=>{const r=e.clone();return U.add(r,{description:n}),r},Object.defineProperty(e,"description",{get(){return U.get(e)?.description},configurable:!0}),e.meta=(...n)=>{if(n.length===0)return U.get(e);const r=e.clone();return U.add(r,n[0]),r},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),He=c("_ZodString",(e,t)=>{ie.init(e,t),z.init(e,t);const n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...r)=>e.check(Nr(...r)),e.includes=(...r)=>e.check(Cr(...r)),e.startsWith=(...r)=>e.check(jr(...r)),e.endsWith=(...r)=>e.check(Dr(...r)),e.min=(...r)=>e.check(L(...r)),e.max=(...r)=>e.check(Xe(...r)),e.length=(...r)=>e.check(qe(...r)),e.nonempty=(...r)=>e.check(L(1,...r)),e.lowercase=r=>e.check(Ar(r)),e.uppercase=r=>e.check(Rr(r)),e.trim=()=>e.check(Fr()),e.normalize=(...r)=>e.check(Ur(...r)),e.toLowerCase=()=>e.check(Mr()),e.toUpperCase=()=>e.check(Lr())}),uo=c("ZodString",(e,t)=>{ie.init(e,t),He.init(e,t),e.email=n=>e.check(rr(co,n)),e.url=n=>e.check(sr(so,n)),e.jwt=n=>e.check(Zr($o,n)),e.emoji=n=>e.check(ar(ao,n)),e.guid=n=>e.check(be(ye,n)),e.uuid=n=>e.check(or(F,n)),e.uuidv4=n=>e.check(ir(F,n)),e.uuidv6=n=>e.check(ur(F,n)),e.uuidv7=n=>e.check(cr(F,n)),e.nanoid=n=>e.check(lr(lo,n)),e.guid=n=>e.check(be(ye,n)),e.cuid=n=>e.check(pr(po,n)),e.cuid2=n=>e.check(hr(ho,n)),e.ulid=n=>e.check(fr(fo,n)),e.base64=n=>e.check(kr(bo,n)),e.base64url=n=>e.check(br(wo,n)),e.xid=n=>e.check(dr(mo,n)),e.ksuid=n=>e.check(mr(_o,n)),e.ipv4=n=>e.check(_r(go,n)),e.ipv6=n=>e.check(gr(vo,n)),e.cidrv4=n=>e.check(vr(zo,n)),e.cidrv6=n=>e.check(zr(ko,n)),e.e164=n=>e.check(wr(Zo,n)),e.datetime=n=>e.check(Gr(n)),e.date=n=>e.check(Xr(n)),e.time=n=>e.check(Hr(n)),e.duration=n=>e.check(eo(n))});function V(e){return nr(uo,e)}const g=c("ZodStringFormat",(e,t)=>{_.init(e,t),He.init(e,t)}),co=c("ZodEmail",(e,t)=>{hn.init(e,t),g.init(e,t)}),ye=c("ZodGUID",(e,t)=>{ln.init(e,t),g.init(e,t)}),F=c("ZodUUID",(e,t)=>{pn.init(e,t),g.init(e,t)}),so=c("ZodURL",(e,t)=>{fn.init(e,t),g.init(e,t)}),ao=c("ZodEmoji",(e,t)=>{dn.init(e,t),g.init(e,t)}),lo=c("ZodNanoID",(e,t)=>{mn.init(e,t),g.init(e,t)}),po=c("ZodCUID",(e,t)=>{_n.init(e,t),g.init(e,t)}),ho=c("ZodCUID2",(e,t)=>{gn.init(e,t),g.init(e,t)}),fo=c("ZodULID",(e,t)=>{vn.init(e,t),g.init(e,t)}),mo=c("ZodXID",(e,t)=>{zn.init(e,t),g.init(e,t)}),_o=c("ZodKSUID",(e,t)=>{kn.init(e,t),g.init(e,t)}),go=c("ZodIPv4",(e,t)=>{yn.init(e,t),g.init(e,t)}),vo=c("ZodIPv6",(e,t)=>{In.init(e,t),g.init(e,t)}),zo=c("ZodCIDRv4",(e,t)=>{En.init(e,t),g.init(e,t)}),ko=c("ZodCIDRv6",(e,t)=>{On.init(e,t),g.init(e,t)}),bo=c("ZodBase64",(e,t)=>{Pn.init(e,t),g.init(e,t)}),wo=c("ZodBase64URL",(e,t)=>{Tn.init(e,t),g.init(e,t)}),Zo=c("ZodE164",(e,t)=>{xn.init(e,t),g.init(e,t)}),$o=c("ZodJWT",(e,t)=>{An.init(e,t),g.init(e,t)}),Qe=c("ZodNumber",(e,t)=>{Ye.init(e,t),z.init(e,t),e.gt=(r,o)=>e.check(Ze(r,o)),e.gte=(r,o)=>e.check(q(r,o)),e.min=(r,o)=>e.check(q(r,o)),e.lt=(r,o)=>e.check(we(r,o)),e.lte=(r,o)=>e.check(X(r,o)),e.max=(r,o)=>e.check(X(r,o)),e.int=r=>e.check(Ie(r)),e.safe=r=>e.check(Ie(r)),e.positive=r=>e.check(Ze(0,r)),e.nonnegative=r=>e.check(q(0,r)),e.negative=r=>e.check(we(0,r)),e.nonpositive=r=>e.check(X(0,r)),e.multipleOf=(r,o)=>e.check($e(r,o)),e.step=(r,o)=>e.check($e(r,o)),e.finite=()=>e;const n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null});function yo(e){return Or(Qe,e)}const Io=c("ZodNumberFormat",(e,t)=>{Rn.init(e,t),Qe.init(e,t)});function Ie(e){return Pr(Io,e)}const Eo=c("ZodBoolean",(e,t)=>{Cn.init(e,t),z.init(e,t)});function Oo(e){return Sr(Eo,e)}const Po=c("ZodUnknown",(e,t)=>{jn.init(e,t),z.init(e,t)});function Ee(){return Tr(Po)}const So=c("ZodNever",(e,t)=>{Dn.init(e,t),z.init(e,t)});function To(e){return xr(So,e)}const xo=c("ZodArray",(e,t)=>{Un.init(e,t),z.init(e,t),e.element=t.element,e.min=(n,r)=>e.check(L(n,r)),e.nonempty=n=>e.check(L(1,n)),e.max=(n,r)=>e.check(Xe(n,r)),e.length=(n,r)=>e.check(qe(n,r)),e.unwrap=()=>e.element});function B(e,t){return Vr(xo,e,t)}const No=c("ZodObject",(e,t)=>{Fn.init(e,t),z.init(e,t),f(e,"shape",()=>t.shape),e.keyof=()=>Do(Object.keys(e._zod.def.shape)),e.catchall=n=>e.clone({...e._zod.def,catchall:n}),e.passthrough=()=>e.clone({...e._zod.def,catchall:Ee()}),e.loose=()=>e.clone({...e._zod.def,catchall:Ee()}),e.strict=()=>e.clone({...e._zod.def,catchall:To()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=n=>ht(e,n),e.merge=n=>ft(e,n),e.pick=n=>lt(e,n),e.omit=n=>pt(e,n),e.partial=(...n)=>dt(et,e,n[0]),e.required=(...n)=>mt(tt,e,n[0])});function ue(e,t){const n={type:"object",get shape(){return P(this,"shape",e?it(e):{}),this.shape},...a(t)};return new No(n)}const Ao=c("ZodUnion",(e,t)=>{Mn.init(e,t),z.init(e,t),e.options=t.options});function Ro(e,t){return new Ao({type:"union",options:e,...a(t)})}const Co=c("ZodIntersection",(e,t)=>{Ln.init(e,t),z.init(e,t)});function jo(e,t){return new Co({type:"intersection",left:e,right:t})}const te=c("ZodEnum",(e,t)=>{Vn.init(e,t),z.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const n=new Set(Object.keys(t.entries));e.extract=(r,o)=>{const i={};for(const u of r)if(n.has(u))i[u]=t.entries[u];else throw new Error(`Key ${u} not found in enum`);return new te({...t,checks:[],...a(o),entries:i})},e.exclude=(r,o)=>{const i={...t.entries};for(const u of r)if(n.has(u))delete i[u];else throw new Error(`Key ${u} not found in enum`);return new te({...t,checks:[],...a(o),entries:i})}});function Do(e,t){const n=Array.isArray(e)?Object.fromEntries(e.map(r=>[r,r])):e;return new te({type:"enum",entries:n,...a(t)})}const Uo=c("ZodTransform",(e,t)=>{Bn.init(e,t),z.init(e,t),e._zod.parse=(n,r)=>{n.addIssue=i=>{if(typeof i=="string")n.issues.push(A(i,n.value,t));else{const u=i;u.fatal&&(u.continue=!1),u.code??(u.code="custom"),u.input??(u.input=n.value),u.inst??(u.inst=e),n.issues.push(A(u))}};const o=t.transform(n.value,n);return o instanceof Promise?o.then(i=>(n.value=i,n)):(n.value=o,n)}});function Fo(e){return new Uo({type:"transform",transform:e})}const et=c("ZodOptional",(e,t)=>{Jn.init(e,t),z.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Oe(e){return new et({type:"optional",innerType:e})}const Mo=c("ZodNullable",(e,t)=>{Kn.init(e,t),z.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Pe(e){return new Mo({type:"nullable",innerType:e})}const Lo=c("ZodDefault",(e,t)=>{Wn.init(e,t),z.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function Vo(e,t){return new Lo({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():Re(t)}})}const Bo=c("ZodPrefault",(e,t)=>{Gn.init(e,t),z.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Jo(e,t){return new Bo({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():Re(t)}})}const tt=c("ZodNonOptional",(e,t)=>{Yn.init(e,t),z.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Ko(e,t){return new tt({type:"nonoptional",innerType:e,...a(t)})}const Wo=c("ZodCatch",(e,t)=>{Xn.init(e,t),z.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function Go(e,t){return new Wo({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const Yo=c("ZodPipe",(e,t)=>{qn.init(e,t),z.init(e,t),e.in=t.in,e.out=t.out});function Se(e,t){return new Yo({type:"pipe",in:e,out:t})}const Xo=c("ZodReadonly",(e,t)=>{Hn.init(e,t),z.init(e,t),e.unwrap=()=>e._zod.def.innerType});function qo(e){return new Xo({type:"readonly",innerType:e})}const Ho=c("ZodCustom",(e,t)=>{Qn.init(e,t),z.init(e,t)});function Qo(e,t={}){return Br(Ho,e,t)}function ei(e){return Jr(e)}const ti=ue({score:yo().min(0).max(100),issues:B(V()).max(8),suggestions:B(V()).max(8)}),ni=ue({improved_prompt:V().min(1),checklist:B(V()).max(12)}),ri="You are a prompt quality judge. Return JSON only that passes this schema: { score: number 0..100, issues: string[], suggestions: string[] }. Scoring rubric: Clarity 25, Specificity 25, Constraints 20, Context 15, Output format 10, Token efficiency 5. Keep issues and suggestions short and actionable. No extra text.",oi=e=>`Evaluate this prompt.
PROMPT
${e}
Return JSON only.`,ii="You are a prompt engineer. Rewrite the prompt to maximize task success while keeping the same goal. If the prompt is vague or brief, infer reasonable defaults and add missing context requests and constraints. Add clear step-by-step instructions. Specify the desired output format. Keep it concise and token-efficient. Return JSON only that passes: { improved_prompt: string, checklist: string[] }. Checklist lists what you improved. No extra text.",ui=e=>`Rewrite this prompt.
PROMPT
${e}
Return JSON only.`;async function ci(){try{return(await chrome.storage.local.get(["gemini_api_key"])).gemini_api_key||null}catch(e){return console.error("Failed to get API key:",e),null}}async function si(){const e=await ci();if(!e)throw new Error("API key not found. Please configure your Gemini API key in the options page.");return e}async function Te(e,t,n){const r=await si(),o={contents:[{role:"user",parts:[{text:`${e}

${t}`}]}],generationConfig:{temperature:n?.temperature??.3,maxOutputTokens:n?.maxTokens??256}},i=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-pro:generateContent?key=${r}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!i.ok)throw new Error(`Gemini API error: ${i.status} ${i.statusText}`);const s=(await i.json()).candidates?.[0]?.content?.parts?.[0]?.text;if(!s)throw new Error("No response from Gemini API");return s}async function ce(e,t,n,r){let o;try{o=await Te(e,t,r);const i=JSON.parse(o);return n.parse(i)}catch{const u=e+" Return VALID JSON only. No prose.";o=await Te(u,t,r);const s=JSON.parse(o);return n.parse(s)}}async function ai(e){return ce(ri,oi(e),ti,{temperature:.1,maxTokens:128})}async function li(e){return ce(ii,ui(e),ni,{temperature:.5,maxTokens:512})}async function pi(){return await ce("Return JSON only: { ok: true }",'Return {"ok":true}',ue({ok:Oo()}),{temperature:0,maxTokens:32})}chrome.runtime.onMessage.addListener((e,t,n)=>(console.log("Background script received message:",e),(async()=>{try{switch(e.type){case"SCORE_PROMPT":const r=await ai(e.prompt);n({ok:!0,data:r});break;case"OPTIMIZE_PROMPT":const o=await li(e.prompt);n({ok:!0,data:o});break;case"TEST_API_KEY":const i=await pi();n({ok:!0,data:i});break;default:n({ok:!1,error:"Unknown message type"})}}catch(r){console.error("Background script error:",r),n({ok:!1,error:r instanceof Error?r.message:"Unknown error occurred"})}})(),!0));
